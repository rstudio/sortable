# sortable

The `sortable` package enables drag-and-drop behaviour in your Shiny
apps. It does this by exposing the functionality of the
[SortableJS](https://sortablejs.github.io/Sortable/) JavaScript library
as an [htmlwidget](http://www.htmlwidgets.org) in R, so you can use this
in Shiny apps and widgets, `learnr` tutorials as well as R Markdown. In
addition, provides a custom `learnr` question type -
[`question_rank()`](https://rstudio.github.io/sortable/reference/question_rank.md)
that allows ranking questions with drag-and-drop.

## Installation

You can install the released version of sortable from
[CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("sortable")
```

And the development version from
[GitHub](https://github.com/rstudio/sortable) with:

``` r
# install.packages("remotes")
remotes::install_github("rstudio/sortable")
```

## Examples

### Rank list

You can create a drag-and-drop input object in Shiny, using the
[`rank_list()`](https://rstudio.github.io/sortable/reference/rank_list.md)
function.

![](reference/figures/rank_list_shiny.gif)

``` r
## Example shiny app with rank list

library(shiny)
library(sortable)

labels <- list(
  "one",
  "two",
  "three",
  htmltools::tags$div(
    htmltools::em("Complex"), " html tag without a name"
  ),
  "five" = htmltools::tags$div(
    htmltools::em("Complex"), " html tag with name: 'five'"
  )
)

rank_list_basic <- rank_list(
  text = "Drag the items in any desired order",
  labels = labels,
  input_id = "rank_list_basic"
)

rank_list_swap <- rank_list(
  text = "Notice that dragging causes items to swap",
  labels = labels,
  input_id = "rank_list_swap",
  options = sortable_options(swap = TRUE)
)

rank_list_multi <- rank_list(
  text = "You can select multiple items, then drag as a group",
  labels = labels,
  input_id = "rank_list_multi",
  options = sortable_options(multiDrag = TRUE)
)



ui <- fluidPage(
  fluidRow(
    column(
      width = 12,
    tags$h2("Default, multi-drag and swapping behaviour"),
      tabsetPanel(
        type = "tabs",
        tabPanel(
          "Default",
            tags$b("Exercise"),
            rank_list_basic,
            tags$b("Result"),
            verbatimTextOutput("results_basic")
        ),
        tabPanel(
          "Multi-drag",
            tags$b("Exercise"),
            rank_list_multi,
            tags$b("Result"),
            verbatimTextOutput("results_multi")
        ),
        tabPanel(
          "Swap",
            tags$b("Exercise"),
            rank_list_swap,
            tags$b("Result"),
            verbatimTextOutput("results_swap")
        )
      )
    )
  )
)

server <- function(input, output, session) {
  output$results_basic <- renderPrint({
    input$rank_list_basic # This matches the input_id of the rank list
  })
  output$results_multi <- renderPrint({
    input$rank_list_multi # This matches the input_id of the rank list
  })
  output$results_swap <- renderPrint({
    input$rank_list_swap # This matches the input_id of the rank list
  })
}

shinyApp(ui, server)
```

### Bucket list

With a bucket list you can have more than one rank lists in a single
object. This can be useful for bucketing tasks, e.g. asking your
students to classify objects into multiple categories.

![](reference/figures/bucket_list_shiny.gif)

``` r
## Example shiny app with bucket list

library(shiny)
library(sortable)

ui <- fluidPage(
  tags$head(
    tags$style(HTML(".bucket-list-container {min-height: 350px;}"))
  ),
  fluidRow(
    column(
      tags$b("Exercise"),
      width = 12,
      bucket_list(
        header = "Drag the items in any desired bucket",
        group_name = "bucket_list_group",
        orientation = "horizontal",
        add_rank_list(
          text = "Drag from here",
          labels = list(
            "one",
            "two",
            "three",
            htmltools::tags$div(
              htmltools::em("Complex"), " html tag without a name"
            ),
            "five" = htmltools::tags$div(
              htmltools::em("Complex"), " html tag with name: 'five'"
            )
          ),
          input_id = "rank_list_1"
        ),
        add_rank_list(
          text = "to here",
          labels = NULL,
          input_id = "rank_list_2"
        )
      )
    )
  ),
  fluidRow(
    column(
      width = 12,
      tags$b("Result"),
      column(
        width = 12,

        tags$p("input$rank_list_1"),
        verbatimTextOutput("results_1"),

        tags$p("input$rank_list_2"),
        verbatimTextOutput("results_2"),

        tags$p("input$bucket_list_group"),
        verbatimTextOutput("results_3")
      )
    )
  )
)

server <- function(input, output, session) {
  output$results_1 <-
    renderPrint(
      input$rank_list_1 # This matches the input_id of the first rank list
    )
  output$results_2 <-
    renderPrint(
      input$rank_list_2 # This matches the input_id of the second rank list
    )
  output$results_3 <-
    renderPrint(
      input$bucket_list_group # Matches the group_name of the bucket list
    )

}


shinyApp(ui, server)
```

### Add drag-and-drop to any HTML element

You can also use
[`sortable_js()`](https://rstudio.github.io/sortable/reference/sortable_js.md)
to drag and drop other widgets:

![](reference/figures/diagrammer.gif)

``` r
library(DiagrammeR)
library(htmltools)

html_print(tagList(
  tags$p("You can drag and drop the diagrams to switch order:"),
  tags$div(
    id = "aUniqueId",
    tags$div(
      style = "border: solid 0.2em gray; float:left; margin: 5px",
      mermaid("graph LR; S[SortableJS] -->|sortable| R ",
              height = 250, width = 300)
    ),
    tags$div(
      style = "border: solid 0.2em gray; float:left; margin: 5px",
      mermaid("graph TD; JavaScript -->|htmlwidgets| R ",
              height = 250, width = 150)
    )
  ),
  sortable_js("aUniqueId") # the CSS id
))
```

## Related work

I learnt about the following related work after starting on `sortable`:

- The `esquisse` [package](https://github.com/dreamRs/esquisse):

  > “The purpose of this add-in is to let you explore your data quickly
  > to extract the information they hold. You can only create simple
  > plots, you won’t be able to use custom scales and all the power of
  > ggplot2.”

- There is also the `shinyjqui`
  [package](https://yang-tang.github.io/shinyjqui/):

  > “An R wrapper for jQuery UI javascript library. It allows user to
  > easily add interactions and animation effects to a shiny app.”

- The `shinyDND` [package](https://cran.r-project.org/package=shinyDND):

  > Adds functionality to create drag and drop div elements in shiny.

# Package index

## Learnr question types

New question types for learnr tutorials

- [`question_rank()`](https://rstudio.github.io/sortable/reference/question_rank.md)
  : Ranking question for learnr tutorials.

## Widgets

These functions create htmlwidgets with drag-and-drop behaviour

- [`rank_list()`](https://rstudio.github.io/sortable/reference/rank_list.md)
  : Create a ranking item list.
- [`bucket_list()`](https://rstudio.github.io/sortable/reference/bucket_list.md)
  : Create a bucket list.
- [`add_rank_list()`](https://rstudio.github.io/sortable/reference/add_rank_list.md)
  : Add a rank list inside bucket list.

## Access the SortableJS library

Lower level access to the SortableJS library

- [`sortable_js()`](https://rstudio.github.io/sortable/reference/sortable_js.md)
  : Creates an htmlwidget with embedded 'SortableJS' library.
- [`sortable_js_capture_input()`](https://rstudio.github.io/sortable/reference/sortable_js_capture_input.md)
  [`sortable_js_capture_bucket_input()`](https://rstudio.github.io/sortable/reference/sortable_js_capture_input.md)
  : Construct JavaScript method to capture Shiny inputs on change.
- [`sortable_options()`](https://rstudio.github.io/sortable/reference/sortable_options.md)
  : Define options to pass to a sortable object.
- [`is_sortable_options()`](https://rstudio.github.io/sortable/reference/is_sortable_options.md)
  : Check if object is sortable options.
- [`chain_js_events()`](https://rstudio.github.io/sortable/reference/chain_js_events.md)
  : Chain multiple JavaScript events

## Shiny functions

Using sortable functions inside a Shiny app

- [`render_sortable()`](https://rstudio.github.io/sortable/reference/render_sortable.md)
  : Widget render function for use in Shiny.

- [`sortable_output()`](https://rstudio.github.io/sortable/reference/sortable_output.md)
  : Widget output function for use in Shiny.

- [`update_rank_list()`](https://rstudio.github.io/sortable/reference/update_rank_list.md)
  : Change the text or labels of a rank list.

- [`update_bucket_list()`](https://rstudio.github.io/sortable/reference/update_bucket_list.md)
  : Change the value of a bucket list.

- [`is_modules_enabled()`](https://rstudio.github.io/sortable/reference/modules.md)
  [`enable_modules()`](https://rstudio.github.io/sortable/reference/modules.md)
  :

  Check if shiny modules are enabled for `sortable`.

## Package documentation

- [`sortable`](https://rstudio.github.io/sortable/reference/sortable.md)
  [`sortable-package`](https://rstudio.github.io/sortable/reference/sortable.md)
  : sortable: Drag-and-Drop in 'shiny' Apps with 'SortableJS'

# Articles

### Getting started

- [Using rank list and bucket lists in Shiny
  apps](https://rstudio.github.io/sortable/articles/built_in.md):

  An introduction to rank list and bucket list elemens, as provided by
  the `sortable` package. A rank list allows you to rank items by
  drag-and-drop, and a bucket list lets you drag items between linked
  rank lists.

- [Using custom styles with
  CSS](https://rstudio.github.io/sortable/articles/using_custom_css.md):

  Sometimes you may want to control the appearance of your rank_list
  elements, and override the default CSS classes.

### Take control of `sortable.js`

- [Understanding the interface to
  sortable.js](https://rstudio.github.io/sortable/articles/understanding_sortable_js.md):

  Understanding the key idea of `sortable.js` will help you to write
  your own custom sortable widgets.

- [Novel solutions using sortable in shiny
  apps](https://rstudio.github.io/sortable/articles/novel_solutions.md):

  Once you understand some of the inner workings of `sortable.js`, you
  can create sortable widgets using any shiny object.

- [Cloning and removing
  elements](https://rstudio.github.io/sortable/articles/cloning.md):

  You can clone and remove elements in a rank_list, i.e. drag an element
  multiple times.

- [Dynamically updating a rank_list
  element](https://rstudio.github.io/sortable/articles/updating_rank_list.md):

  You can dynamically update the values inside a `rank_list` by using
  standard shiny reactive programming techniques.

### Using `sortable` with `shiny` modules

- [Using \`sortable\` with \`shiny\`
  modules](https://rstudio.github.io/sortable/articles/shiny_modules.md):

  This vignette explains how to use sortable with `shiny` modules,
  including how to enable module support and how ID handling works with
  modules.
